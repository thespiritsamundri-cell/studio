

@media print {
  @page {
    size: A4;
    margin: 0.25in;
  }
  
  body {
    -webkit-print-color-adjust: exact;
    print-color-adjust: exact;
  }

  .printable-page {
    page-break-after: always;
  }
  
  .printable-page:last-child {
      page-break-after: auto;
  }

  /* --- FOR ROLL NUMBER SLIPS --- */
  
  /* --- Layout for 1 Slip per Page --- */
  .roll-number-slips-container[data-print-layout="1"] .slip-wrapper {
      page-break-after: always;
  }
  .roll-number-slips-container[data-print-layout="1"] .slip-wrapper:last-child {
      page-break-after: auto;
  }
  
  /* --- Layout for 2 Slips per Page --- */
  .roll-number-slips-container[data-print-layout="2"] .slip-page-wrapper {
      display: flex;
      flex-direction: column;
      height: 10.9in; /* A4 height is ~11.69in, leaving room for margins */
      width: 100%;
      page-break-after: always;
      box-sizing: border-box;
  }
   .roll-number-slips-container[data-print-layout="2"] .slip-page-wrapper:last-child {
      page-break-after: auto;
   }

  .roll-number-slips-container[data-print-layout="2"] .slip-wrapper {
      height: 50%;
      box-sizing: border-box;
      flex-shrink: 0;
      display: flex;
      flex-direction: column;
      padding-bottom: 0.25in; /* Gutter between slips */
  }

  .roll-number-slips-container[data-print-layout="2"] .slip-page-wrapper .slip-wrapper:last-child {
      padding-bottom: 0; /* No gutter after the second slip */
  }


  /* --- FOR VOUCHERS --- */
  .voucher-page {
    page-break-after: always;
  }
  
  .voucher-page:last-child {
      page-break-after: auto;
  }

  /* --- 1 Copy per Page --- */
  [data-print-copies="1"] .voucher-page {
    page-break-inside: avoid;
  }
  [data-print-copies="1"] .voucher-wrapper {
    page-break-after: always; /* Each slip on a new page */
    height: 98vh;
    width: 100%;
  }
  [data-print-copies="1"] .voucher-page:last-child .voucher-wrapper:last-child {
     page-break-after: auto;
  }


  /* --- 2 Copies per Page --- */
  [data-print-copies="2"] .voucher-page {
    page-break-inside: avoid;
    display: flex;
    flex-direction: column;
    height: 98vh;
    justify-content: space-between;
    gap: 0.25in;
  }
  [data-print-copies="2"] .voucher-wrapper {
    height: 48%;
    width: 100%;
    box-sizing: border-box;
  }
  /* Ensure the 3rd copy goes to the next page */
  [data-print-copies="2"] .voucher-wrapper:nth-child(3) {
    page-break-before: always;
  }

  /* --- 3 Copies per Page (Landscape) --- */
  @page landscape-page {
    size: A4 landscape;
  }
  [data-print-copies="3"] .voucher-page {
    page: landscape-page;
    page-break-inside: avoid;
    display: flex;
    flex-direction: row;
    justify-content: space-between;
    align-items: stretch;
    width: 100%;
    height: 98vh;
    gap: 0.25in;
  }
  [data-print-copies="3"] .voucher-wrapper {
    width: 32%;
    height: 100%;
    box-sizing: border-box;
    display: flex; /* Ensure inner content can grow */
  }
}
